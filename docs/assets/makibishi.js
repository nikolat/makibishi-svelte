var rr=Object.defineProperty;var or=(e,t,n)=>t in e?rr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var _=(e,t,n)=>or(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function qe(){}function wn(e){return e()}function Zt(){return Object.create(null)}function ze(e){e.forEach(wn)}function yn(e){return typeof e=="function"}function bn(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let We;function Te(e,t){return e===t?!0:(We||(We=document.createElement("a")),We.href=t,e===We.href)}function sr(e){return Object.keys(e).length===0}function De(e,t){e.appendChild(t)}function F(e,t,n){e.insertBefore(t,n||null)}function D(e){e.parentNode&&e.parentNode.removeChild(e)}function ir(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function X(e){return document.createElement(e)}function Ke(e){return document.createTextNode(e)}function cr(){return Ke(" ")}function fr(){return Ke("")}function mn(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function I(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ar(e){return Array.from(e.childNodes)}function Ut(e,t){t=""+t,e.data!==t&&(e.data=t)}let Me;function Pe(e){Me=e}function lr(){if(!Me)throw new Error("Function called outside component initialization");return Me}function ur(e){lr().$$.on_mount.push(e)}const Ie=[],Dt=[];let Le=[];const Gt=[],hr=Promise.resolve();let mt=!1;function dr(){mt||(mt=!0,hr.then(En))}function Et(e){Le.push(e)}const at=new Set;let $e=0;function En(){if($e!==0)return;const e=Me;do{try{for(;$e<Ie.length;){const t=Ie[$e];$e++,Pe(t),gr(t.$$)}}catch(t){throw Ie.length=0,$e=0,t}for(Pe(null),Ie.length=0,$e=0;Dt.length;)Dt.pop()();for(let t=0;t<Le.length;t+=1){const n=Le[t];at.has(n)||(at.add(n),n())}Le.length=0}while(Ie.length);for(;Gt.length;)Gt.pop()();mt=!1,at.clear(),Pe(e)}function gr(e){if(e.fragment!==null){e.update(),ze(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Et)}}function pr(e){const t=[],n=[];Le.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),Le=t}const Ze=new Set;let me;function xn(){me={r:0,c:[],p:me}}function vn(){me.r||ze(me.c),me=me.p}function te(e,t){e&&e.i&&(Ze.delete(e),e.i(t))}function xe(e,t,n,r){if(e&&e.o){if(Ze.has(e))return;Ze.add(e),me.c.push(()=>{Ze.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Ft(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function xt(e){e&&e.c()}function Ge(e,t,n){const{fragment:r,after_update:o}=e.$$;r&&r.m(t,n),Et(()=>{const s=e.$$.on_mount.map(wn).filter(yn);e.$$.on_destroy?e.$$.on_destroy.push(...s):ze(s),e.$$.on_mount=[]}),o.forEach(Et)}function Fe(e,t){const n=e.$$;n.fragment!==null&&(pr(n.after_update),ze(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function wr(e,t){e.$$.dirty[0]===-1&&(Ie.push(e),dr(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function _n(e,t,n,r,o,s,i=null,c=[-1]){const f=Me;Pe(e);const a=e.$$={fragment:null,ctx:[],props:s,update:qe,not_equal:o,bound:Zt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:Zt(),dirty:c,skip_bound:!1,root:t.target||f.$$.root};i&&i(a.root);let u=!1;if(a.ctx=n?n(e,t.props||{},(l,h,...g)=>{const y=g.length?g[0]:h;return a.ctx&&o(a.ctx[l],a.ctx[l]=y)&&(!a.skip_bound&&a.bound[l]&&a.bound[l](y),u&&wr(e,l)),h}):[],a.update(),u=!0,ze(a.before_update),a.fragment=r?r(a.ctx):!1,t.target){if(t.hydrate){const l=ar(t.target);a.fragment&&a.fragment.l(l),l.forEach(D)}else a.fragment&&a.fragment.c();t.intro&&te(e.$$.fragment),Ge(e,t.target,t.anchor),En()}Pe(f)}class An{constructor(){_(this,"$$");_(this,"$$set")}$destroy(){Fe(this,1),this.$destroy=qe}$on(t,n){if(!yn(n))return qe;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(t){this.$$set&&!sr(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const yr="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(yr);function Yt(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Bn(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function br(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Yt(e.outputLen),Yt(e.blockLen)}function Ye(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function mr(e,t){Bn(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const lt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Sn=e=>e instanceof Uint8Array,ut=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Y=(e,t)=>e<<32-t|e>>>t,Er=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Er)throw new Error("Non little-endian hardware is not supported");function xr(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Nt(e){if(typeof e=="string"&&(e=xr(e)),!Sn(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function vr(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!Sn(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}let $n=class{clone(){return this._cloneInto()}};function _r(e){const t=r=>e().update(Nt(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function kn(e=32){if(lt&&typeof lt.getRandomValues=="function")return lt.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function Ar(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),s=BigInt(4294967295),i=Number(n>>o&s),c=Number(n&s),f=r?4:0,a=r?0:4;e.setUint32(t+f,i,r),e.setUint32(t+a,c,r)}let Br=class extends $n{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=ut(this.buffer)}update(t){Ye(this);const{view:n,buffer:r,blockLen:o}=this;t=Nt(t);const s=t.length;for(let i=0;i<s;){const c=Math.min(o-this.pos,s-i);if(c===o){const f=ut(t);for(;o<=s-i;i+=o)this.process(f,i);continue}r.set(t.subarray(i,i+c),this.pos),this.pos+=c,i+=c,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ye(this),mr(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:s}=this;let{pos:i}=this;n[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>o-i&&(this.process(r,0),i=0);for(let l=i;l<o;l++)n[l]=0;Ar(r,o-8,BigInt(this.length*8),s),this.process(r,0);const c=ut(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const a=f/4,u=this.get();if(a>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<a;l++)c.setUint32(4*l,u[l],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:s,destroyed:i,pos:c}=this;return t.length=o,t.pos=c,t.finished=s,t.destroyed=i,o%n&&t.buffer.set(r),t}};const Sr=(e,t,n)=>e&t^~e&n,$r=(e,t,n)=>e&t^e&n^t&n,kr=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ae=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),le=new Uint32Array(64);let Ir=class extends Br{constructor(){super(64,32,8,!1),this.A=ae[0]|0,this.B=ae[1]|0,this.C=ae[2]|0,this.D=ae[3]|0,this.E=ae[4]|0,this.F=ae[5]|0,this.G=ae[6]|0,this.H=ae[7]|0}get(){const{A:t,B:n,C:r,D:o,E:s,F:i,G:c,H:f}=this;return[t,n,r,o,s,i,c,f]}set(t,n,r,o,s,i,c,f){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=s|0,this.F=i|0,this.G=c|0,this.H=f|0}process(t,n){for(let l=0;l<16;l++,n+=4)le[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const h=le[l-15],g=le[l-2],y=Y(h,7)^Y(h,18)^h>>>3,d=Y(g,17)^Y(g,19)^g>>>10;le[l]=d+le[l-7]+y+le[l-16]|0}let{A:r,B:o,C:s,D:i,E:c,F:f,G:a,H:u}=this;for(let l=0;l<64;l++){const h=Y(c,6)^Y(c,11)^Y(c,25),g=u+h+Sr(c,f,a)+kr[l]+le[l]|0,d=(Y(r,2)^Y(r,13)^Y(r,22))+$r(r,o,s)|0;u=a,a=f,f=c,c=i+g|0,i=s,s=o,o=r,r=g+d|0}r=r+this.A|0,o=o+this.B|0,s=s+this.C|0,i=i+this.D|0,c=c+this.E|0,f=f+this.F|0,a=a+this.G|0,u=u+this.H|0,this.set(r,o,s,i,c,f,a,u)}roundClean(){le.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const vt=_r(()=>new Ir);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const In=BigInt(0),tt=BigInt(1),Lr=BigInt(2),nt=e=>e instanceof Uint8Array,Tr=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Oe(e){if(!nt(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Tr[e[n]];return t}function Ln(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function Ht(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Ue(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const o=r*2,s=e.slice(o,o+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[r]=i}return n}function q(e){return Ht(Oe(e))}function Rt(e){if(!nt(e))throw new Error("Uint8Array expected");return Ht(Oe(Uint8Array.from(e).reverse()))}function ge(e,t){return Ue(e.toString(16).padStart(t*2,"0"))}function Ct(e,t){return ge(e,t).reverse()}function Or(e){return Ue(Ln(e))}function P(e,t,n){let r;if(typeof t=="string")try{r=Ue(t)}catch(s){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${s}`)}else if(nt(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const o=r.length;if(typeof n=="number"&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r}function ve(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!nt(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}function Ur(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Nr(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Hr(e){let t;for(t=0;e>In;e>>=tt,t+=1);return t}function Rr(e,t){return e>>BigInt(t)&tt}const Cr=(e,t,n)=>e|(n?tt:In)<<BigInt(t),Pt=e=>(Lr<<BigInt(e-1))-tt,ht=e=>new Uint8Array(e),Jt=e=>Uint8Array.from(e);function Tn(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=ht(e),o=ht(e),s=0;const i=()=>{r.fill(1),o.fill(0),s=0},c=(...l)=>n(o,r,...l),f=(l=ht())=>{o=c(Jt([0]),l),r=c(),l.length!==0&&(o=c(Jt([1]),l),r=c())},a=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const h=[];for(;l<t;){r=c();const g=r.slice();h.push(g),l+=r.length}return ve(...h)};return(l,h)=>{i(),f(l);let g;for(;!(g=h(a()));)f();return i(),g}}const Pr={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Ve(e,t,n={}){const r=(o,s,i)=>{const c=Pr[s];if(typeof c!="function")throw new Error(`Invalid validator "${s}", expected function`);const f=e[o];if(!(i&&f===void 0)&&!c(f,e))throw new Error(`Invalid param ${String(o)}=${f} (${typeof f}), expected ${s}`)};for(const[o,s]of Object.entries(t))r(o,s,!1);for(const[o,s]of Object.entries(n))r(o,s,!0);return e}const qr=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Rr,bitLen:Hr,bitMask:Pt,bitSet:Cr,bytesToHex:Oe,bytesToNumberBE:q,bytesToNumberLE:Rt,concatBytes:ve,createHmacDrbg:Tn,ensureBytes:P,equalBytes:Ur,hexToBytes:Ue,hexToNumber:Ht,numberToBytesBE:ge,numberToBytesLE:Ct,numberToHexUnpadded:Ln,numberToVarBytesBE:Or,utf8ToBytes:Nr,validateObject:Ve},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const R=BigInt(0),N=BigInt(1),be=BigInt(2),Mr=BigInt(3),_t=BigInt(4),Qt=BigInt(5),Xt=BigInt(8);BigInt(9);BigInt(16);function C(e,t){const n=e%t;return n>=R?n:t+n}function jr(e,t,n){if(n<=R||t<R)throw new Error("Expected power/modulo > 0");if(n===N)return R;let r=N;for(;t>R;)t&N&&(r=r*e%n),e=e*e%n,t>>=N;return r}function W(e,t,n){let r=e;for(;t-- >R;)r*=r,r%=n;return r}function At(e,t){if(e===R||t<=R)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=C(e,t),r=t,o=R,s=N;for(;n!==R;){const c=r/n,f=r%n,a=o-s*c;r=n,n=f,o=s,s=a}if(r!==N)throw new Error("invert: does not exist");return C(o,t)}function zr(e){const t=(e-N)/be;let n,r,o;for(n=e-N,r=0;n%be===R;n/=be,r++);for(o=be;o<e&&jr(o,t,e)!==e-N;o++);if(r===1){const i=(e+N)/_t;return function(f,a){const u=f.pow(a,i);if(!f.eql(f.sqr(u),a))throw new Error("Cannot find square root");return u}}const s=(n+N)/be;return function(c,f){if(c.pow(f,t)===c.neg(c.ONE))throw new Error("Cannot find square root");let a=r,u=c.pow(c.mul(c.ONE,o),n),l=c.pow(f,s),h=c.pow(f,n);for(;!c.eql(h,c.ONE);){if(c.eql(h,c.ZERO))return c.ZERO;let g=1;for(let d=c.sqr(h);g<a&&!c.eql(d,c.ONE);g++)d=c.sqr(d);const y=c.pow(u,N<<BigInt(a-g-1));u=c.sqr(y),l=c.mul(l,y),h=c.mul(h,u),a=g}return l}}function Kr(e){if(e%_t===Mr){const t=(e+N)/_t;return function(r,o){const s=r.pow(o,t);if(!r.eql(r.sqr(s),o))throw new Error("Cannot find square root");return s}}if(e%Xt===Qt){const t=(e-Qt)/Xt;return function(r,o){const s=r.mul(o,be),i=r.pow(s,t),c=r.mul(o,i),f=r.mul(r.mul(c,be),i),a=r.mul(c,r.sub(f,r.ONE));if(!r.eql(r.sqr(a),o))throw new Error("Cannot find square root");return a}}return zr(e)}const Vr=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Wr(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Vr.reduce((r,o)=>(r[o]="function",r),t);return Ve(e,n)}function Zr(e,t,n){if(n<R)throw new Error("Expected power > 0");if(n===R)return e.ONE;if(n===N)return t;let r=e.ONE,o=t;for(;n>R;)n&N&&(r=e.mul(r,o)),o=e.sqr(o),n>>=N;return r}function Dr(e,t){const n=new Array(t.length),r=t.reduce((s,i,c)=>e.is0(i)?s:(n[c]=s,e.mul(s,i)),e.ONE),o=e.inv(r);return t.reduceRight((s,i,c)=>e.is0(i)?s:(n[c]=e.mul(s,n[c]),e.mul(s,i)),o),n}function On(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Gr(e,t,n=!1,r={}){if(e<=R)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:o,nByteLength:s}=On(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const i=Kr(e),c=Object.freeze({ORDER:e,BITS:o,BYTES:s,MASK:Pt(o),ZERO:R,ONE:N,create:f=>C(f,e),isValid:f=>{if(typeof f!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof f}`);return R<=f&&f<e},is0:f=>f===R,isOdd:f=>(f&N)===N,neg:f=>C(-f,e),eql:(f,a)=>f===a,sqr:f=>C(f*f,e),add:(f,a)=>C(f+a,e),sub:(f,a)=>C(f-a,e),mul:(f,a)=>C(f*a,e),pow:(f,a)=>Zr(c,f,a),div:(f,a)=>C(f*At(a,e),e),sqrN:f=>f*f,addN:(f,a)=>f+a,subN:(f,a)=>f-a,mulN:(f,a)=>f*a,inv:f=>At(f,e),sqrt:r.sqrt||(f=>i(c,f)),invertBatch:f=>Dr(c,f),cmov:(f,a,u)=>u?a:f,toBytes:f=>n?Ct(f,s):ge(f,s),fromBytes:f=>{if(f.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${f.length}`);return n?Rt(f):q(f)}});return Object.freeze(c)}function Un(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Nn(e){const t=Un(e);return t+Math.ceil(t/2)}function Fr(e,t,n=!1){const r=e.length,o=Un(t),s=Nn(t);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const i=n?q(e):Rt(e),c=C(i,t-N)+N;return n?Ct(c,o):ge(c,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Yr=BigInt(0),dt=BigInt(1);function Jr(e,t){const n=(o,s)=>{const i=s.negate();return o?i:s},r=o=>{const s=Math.ceil(t/o)+1,i=2**(o-1);return{windows:s,windowSize:i}};return{constTimeNegate:n,unsafeLadder(o,s){let i=e.ZERO,c=o;for(;s>Yr;)s&dt&&(i=i.add(c)),c=c.double(),s>>=dt;return i},precomputeWindow(o,s){const{windows:i,windowSize:c}=r(s),f=[];let a=o,u=a;for(let l=0;l<i;l++){u=a,f.push(u);for(let h=1;h<c;h++)u=u.add(a),f.push(u);a=u.double()}return f},wNAF(o,s,i){const{windows:c,windowSize:f}=r(o);let a=e.ZERO,u=e.BASE;const l=BigInt(2**o-1),h=2**o,g=BigInt(o);for(let y=0;y<c;y++){const d=y*f;let w=Number(i&l);i>>=g,w>f&&(w-=h,i+=dt);const b=d,m=d+Math.abs(w)-1,x=y%2!==0,$=w<0;w===0?u=u.add(n(x,s[b])):a=a.add(n($,s[m]))}return{p:a,f:u}},wNAFCached(o,s,i,c){const f=o._WINDOW_SIZE||1;let a=s.get(o);return a||(a=this.precomputeWindow(o,f),f!==1&&s.set(o,c(a))),this.wNAF(f,a,i)}}}function Hn(e){return Wr(e.Fp),Ve(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...On(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Qr(e){const t=Hn(e);Ve(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:Xr,hexToBytes:eo}=qr,Ee={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=Ee;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Xr(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=Ee,n=typeof e=="string"?eo(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:o,l:s}=Ee._parseInt(n.subarray(2)),{d:i,l:c}=Ee._parseInt(s);if(c.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s:i}},hexFromSig(e){const t=a=>Number.parseInt(a[0],16)&8?"00"+a:a,n=a=>{const u=a.toString(16);return u.length&1?`0${u}`:u},r=t(n(e.s)),o=t(n(e.r)),s=r.length/2,i=o.length/2,c=n(s),f=n(i);return`30${n(i+s+4)}02${f}${o}02${c}${r}`}},ee=BigInt(0),Z=BigInt(1);BigInt(2);const en=BigInt(3);BigInt(4);function to(e){const t=Qr(e),{Fp:n}=t,r=t.toBytes||((y,d,w)=>{const b=d.toAffine();return ve(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),o=t.fromBytes||(y=>{const d=y.subarray(1),w=n.fromBytes(d.subarray(0,n.BYTES)),b=n.fromBytes(d.subarray(n.BYTES,2*n.BYTES));return{x:w,y:b}});function s(y){const{a:d,b:w}=t,b=n.sqr(y),m=n.mul(b,y);return n.add(n.add(m,n.mul(y,d)),w)}if(!n.eql(n.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function i(y){return typeof y=="bigint"&&ee<y&&y<t.n}function c(y){if(!i(y))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function f(y){const{allowedPrivateKeyLengths:d,nByteLength:w,wrapPrivateKey:b,n:m}=t;if(d&&typeof y!="bigint"){if(y instanceof Uint8Array&&(y=Oe(y)),typeof y!="string"||!d.includes(y.length))throw new Error("Invalid key");y=y.padStart(w*2,"0")}let x;try{x=typeof y=="bigint"?y:q(P("private key",y,w))}catch{throw new Error(`private key must be ${w} bytes, hex or bigint, not ${typeof y}`)}return b&&(x=C(x,m)),c(x),x}const a=new Map;function u(y){if(!(y instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(d,w,b){if(this.px=d,this.py=w,this.pz=b,d==null||!n.isValid(d))throw new Error("x required");if(w==null||!n.isValid(w))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required")}static fromAffine(d){const{x:w,y:b}=d||{};if(!d||!n.isValid(w)||!n.isValid(b))throw new Error("invalid affine point");if(d instanceof l)throw new Error("projective point not allowed");const m=x=>n.eql(x,n.ZERO);return m(w)&&m(b)?l.ZERO:new l(w,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(d){const w=n.invertBatch(d.map(b=>b.pz));return d.map((b,m)=>b.toAffine(w[m])).map(l.fromAffine)}static fromHex(d){const w=l.fromAffine(o(P("pointHex",d)));return w.assertValidity(),w}static fromPrivateKey(d){return l.BASE.multiply(f(d))}_setWindowSize(d){this._WINDOW_SIZE=d,a.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:d,y:w}=this.toAffine();if(!n.isValid(d)||!n.isValid(w))throw new Error("bad point: x or y not FE");const b=n.sqr(w),m=s(d);if(!n.eql(b,m))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:d}=this.toAffine();if(n.isOdd)return!n.isOdd(d);throw new Error("Field doesn't support isOdd")}equals(d){u(d);const{px:w,py:b,pz:m}=this,{px:x,py:$,pz:S}=d,v=n.eql(n.mul(w,S),n.mul(x,m)),A=n.eql(n.mul(b,S),n.mul($,m));return v&&A}negate(){return new l(this.px,n.neg(this.py),this.pz)}double(){const{a:d,b:w}=t,b=n.mul(w,en),{px:m,py:x,pz:$}=this;let S=n.ZERO,v=n.ZERO,A=n.ZERO,B=n.mul(m,m),V=n.mul(x,x),U=n.mul($,$),L=n.mul(m,x);return L=n.add(L,L),A=n.mul(m,$),A=n.add(A,A),S=n.mul(d,A),v=n.mul(b,U),v=n.add(S,v),S=n.sub(V,v),v=n.add(V,v),v=n.mul(S,v),S=n.mul(L,S),A=n.mul(b,A),U=n.mul(d,U),L=n.sub(B,U),L=n.mul(d,L),L=n.add(L,A),A=n.add(B,B),B=n.add(A,B),B=n.add(B,U),B=n.mul(B,L),v=n.add(v,B),U=n.mul(x,$),U=n.add(U,U),B=n.mul(U,L),S=n.sub(S,B),A=n.mul(U,V),A=n.add(A,A),A=n.add(A,A),new l(S,v,A)}add(d){u(d);const{px:w,py:b,pz:m}=this,{px:x,py:$,pz:S}=d;let v=n.ZERO,A=n.ZERO,B=n.ZERO;const V=t.a,U=n.mul(t.b,en);let L=n.mul(w,x),M=n.mul(b,$),j=n.mul(m,S),se=n.add(w,b),p=n.add(x,$);se=n.mul(se,p),p=n.add(L,M),se=n.sub(se,p),p=n.add(w,m);let E=n.add(x,S);return p=n.mul(p,E),E=n.add(L,j),p=n.sub(p,E),E=n.add(b,m),v=n.add($,S),E=n.mul(E,v),v=n.add(M,j),E=n.sub(E,v),B=n.mul(V,p),v=n.mul(U,j),B=n.add(v,B),v=n.sub(M,B),B=n.add(M,B),A=n.mul(v,B),M=n.add(L,L),M=n.add(M,L),j=n.mul(V,j),p=n.mul(U,p),M=n.add(M,j),j=n.sub(L,j),j=n.mul(V,j),p=n.add(p,j),L=n.mul(M,p),A=n.add(A,L),L=n.mul(E,p),v=n.mul(se,v),v=n.sub(v,L),L=n.mul(se,M),B=n.mul(E,B),B=n.add(B,L),new l(v,A,B)}subtract(d){return this.add(d.negate())}is0(){return this.equals(l.ZERO)}wNAF(d){return g.wNAFCached(this,a,d,w=>{const b=n.invertBatch(w.map(m=>m.pz));return w.map((m,x)=>m.toAffine(b[x])).map(l.fromAffine)})}multiplyUnsafe(d){const w=l.ZERO;if(d===ee)return w;if(c(d),d===Z)return this;const{endo:b}=t;if(!b)return g.unsafeLadder(this,d);let{k1neg:m,k1:x,k2neg:$,k2:S}=b.splitScalar(d),v=w,A=w,B=this;for(;x>ee||S>ee;)x&Z&&(v=v.add(B)),S&Z&&(A=A.add(B)),B=B.double(),x>>=Z,S>>=Z;return m&&(v=v.negate()),$&&(A=A.negate()),A=new l(n.mul(A.px,b.beta),A.py,A.pz),v.add(A)}multiply(d){c(d);let w=d,b,m;const{endo:x}=t;if(x){const{k1neg:$,k1:S,k2neg:v,k2:A}=x.splitScalar(w);let{p:B,f:V}=this.wNAF(S),{p:U,f:L}=this.wNAF(A);B=g.constTimeNegate($,B),U=g.constTimeNegate(v,U),U=new l(n.mul(U.px,x.beta),U.py,U.pz),b=B.add(U),m=V.add(L)}else{const{p:$,f:S}=this.wNAF(w);b=$,m=S}return l.normalizeZ([b,m])[0]}multiplyAndAddUnsafe(d,w,b){const m=l.BASE,x=(S,v)=>v===ee||v===Z||!S.equals(m)?S.multiplyUnsafe(v):S.multiply(v),$=x(this,w).add(x(d,b));return $.is0()?void 0:$}toAffine(d){const{px:w,py:b,pz:m}=this,x=this.is0();d==null&&(d=x?n.ONE:n.inv(m));const $=n.mul(w,d),S=n.mul(b,d),v=n.mul(m,d);if(x)return{x:n.ZERO,y:n.ZERO};if(!n.eql(v,n.ONE))throw new Error("invZ was invalid");return{x:$,y:S}}isTorsionFree(){const{h:d,isTorsionFree:w}=t;if(d===Z)return!0;if(w)return w(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:d,clearCofactor:w}=t;return d===Z?this:w?w(l,this):this.multiplyUnsafe(t.h)}toRawBytes(d=!0){return this.assertValidity(),r(l,this,d)}toHex(d=!0){return Oe(this.toRawBytes(d))}}l.BASE=new l(t.Gx,t.Gy,n.ONE),l.ZERO=new l(n.ZERO,n.ONE,n.ZERO);const h=t.nBitLength,g=Jr(l,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:f,weierstrassEquation:s,isWithinCurveOrder:i}}function no(e){const t=Hn(e);return Ve(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function ro(e){const t=no(e),{Fp:n,n:r}=t,o=n.BYTES+1,s=2*n.BYTES+1;function i(p){return ee<p&&p<n.ORDER}function c(p){return C(p,r)}function f(p){return At(p,r)}const{ProjectivePoint:a,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:h}=to({...t,toBytes(p,E,k){const O=E.toAffine(),T=n.toBytes(O.x),H=ve;return k?H(Uint8Array.from([E.hasEvenY()?2:3]),T):H(Uint8Array.from([4]),T,n.toBytes(O.y))},fromBytes(p){const E=p.length,k=p[0],O=p.subarray(1);if(E===o&&(k===2||k===3)){const T=q(O);if(!i(T))throw new Error("Point is not on curve");const H=l(T);let z=n.sqrt(H);const K=(z&Z)===Z;return(k&1)===1!==K&&(z=n.neg(z)),{x:T,y:z}}else if(E===s&&k===4){const T=n.fromBytes(O.subarray(0,n.BYTES)),H=n.fromBytes(O.subarray(n.BYTES,2*n.BYTES));return{x:T,y:H}}else throw new Error(`Point of length ${E} was invalid. Expected ${o} compressed bytes or ${s} uncompressed bytes`)}}),g=p=>Oe(ge(p,t.nByteLength));function y(p){const E=r>>Z;return p>E}function d(p){return y(p)?c(-p):p}const w=(p,E,k)=>q(p.slice(E,k));class b{constructor(E,k,O){this.r=E,this.s=k,this.recovery=O,this.assertValidity()}static fromCompact(E){const k=t.nByteLength;return E=P("compactSignature",E,k*2),new b(w(E,0,k),w(E,k,2*k))}static fromDER(E){const{r:k,s:O}=Ee.toSig(P("DER",E));return new b(k,O)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(E){return new b(this.r,this.s,E)}recoverPublicKey(E){const{r:k,s:O,recovery:T}=this,H=A(P("msgHash",E));if(T==null||![0,1,2,3].includes(T))throw new Error("recovery id invalid");const z=T===2||T===3?k+t.n:k;if(z>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const K=T&1?"03":"02",ie=a.fromHex(K+g(z)),ce=f(z),_e=c(-H*ce),He=c(O*ce),fe=a.BASE.multiplyAndAddUnsafe(ie,_e,He);if(!fe)throw new Error("point at infinify");return fe.assertValidity(),fe}hasHighS(){return y(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return Ue(this.toDERHex())}toDERHex(){return Ee.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ue(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const m={isValidPrivateKey(p){try{return u(p),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const p=Nn(t.n);return Fr(t.randomBytes(p),t.n)},precompute(p=8,E=a.BASE){return E._setWindowSize(p),E.multiply(BigInt(3)),E}};function x(p,E=!0){return a.fromPrivateKey(p).toRawBytes(E)}function $(p){const E=p instanceof Uint8Array,k=typeof p=="string",O=(E||k)&&p.length;return E?O===o||O===s:k?O===2*o||O===2*s:p instanceof a}function S(p,E,k=!0){if($(p))throw new Error("first arg must be private key");if(!$(E))throw new Error("second arg must be public key");return a.fromHex(E).multiply(u(p)).toRawBytes(k)}const v=t.bits2int||function(p){const E=q(p),k=p.length*8-t.nBitLength;return k>0?E>>BigInt(k):E},A=t.bits2int_modN||function(p){return c(v(p))},B=Pt(t.nBitLength);function V(p){if(typeof p!="bigint")throw new Error("bigint expected");if(!(ee<=p&&p<B))throw new Error(`bigint expected < 2^${t.nBitLength}`);return ge(p,t.nByteLength)}function U(p,E,k=L){if(["recovered","canonical"].some(we=>we in k))throw new Error("sign() legacy options not supported");const{hash:O,randomBytes:T}=t;let{lowS:H,prehash:z,extraEntropy:K}=k;H==null&&(H=!0),p=P("msgHash",p),z&&(p=P("prehashed msgHash",O(p)));const ie=A(p),ce=u(E),_e=[V(ce),V(ie)];if(K!=null){const we=K===!0?T(n.BYTES):K;_e.push(P("extraEntropy",we))}const He=ve(..._e),fe=ie;function ft(we){const Ae=v(we);if(!h(Ae))return;const Kt=f(Ae),Be=a.BASE.multiply(Ae).toAffine(),G=c(Be.x);if(G===ee)return;const Se=c(Kt*c(fe+G*ce));if(Se===ee)return;let Vt=(Be.x===G?0:2)|Number(Be.y&Z),Wt=Se;return H&&y(Se)&&(Wt=d(Se),Vt^=1),new b(G,Wt,Vt)}return{seed:He,k2sig:ft}}const L={lowS:t.lowS,prehash:!1},M={lowS:t.lowS,prehash:!1};function j(p,E,k=L){const{seed:O,k2sig:T}=U(p,E,k),H=t;return Tn(H.hash.outputLen,H.nByteLength,H.hmac)(O,T)}a.BASE._setWindowSize(8);function se(p,E,k,O=M){var Be;const T=p;if(E=P("msgHash",E),k=P("publicKey",k),"strict"in O)throw new Error("options.strict was renamed to lowS");const{lowS:H,prehash:z}=O;let K,ie;try{if(typeof T=="string"||T instanceof Uint8Array)try{K=b.fromDER(T)}catch(G){if(!(G instanceof Ee.Err))throw G;K=b.fromCompact(T)}else if(typeof T=="object"&&typeof T.r=="bigint"&&typeof T.s=="bigint"){const{r:G,s:Se}=T;K=new b(G,Se)}else throw new Error("PARSE");ie=a.fromHex(k)}catch(G){if(G.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(H&&K.hasHighS())return!1;z&&(E=t.hash(E));const{r:ce,s:_e}=K,He=A(E),fe=f(_e),ft=c(He*fe),we=c(ce*fe),Ae=(Be=a.BASE.multiplyAndAddUnsafe(ie,ft,we))==null?void 0:Be.toAffine();return Ae?c(Ae.x)===ce:!1}return{CURVE:t,getPublicKey:x,getSharedSecret:S,sign:j,verify:se,ProjectivePoint:a,Signature:b,utils:m}}class Rn extends $n{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,br(t);const r=Nt(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,s=new Uint8Array(o);s.set(r.length>o?t.create().update(r).digest():r);for(let i=0;i<s.length;i++)s[i]^=54;this.iHash.update(s),this.oHash=t.create();for(let i=0;i<s.length;i++)s[i]^=106;this.oHash.update(s),s.fill(0)}update(t){return Ye(this),this.iHash.update(t),this}digestInto(t){Ye(this),Bn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:s,blockLen:i,outputLen:c}=this;return t=t,t.finished=o,t.destroyed=s,t.blockLen=i,t.outputLen=c,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Cn=(e,t,n)=>new Rn(e,t).update(n).digest();Cn.create=(e,t)=>new Rn(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function oo(e){return{hash:e,hmac:(t,...n)=>Cn(e,t,vr(...n)),randomBytes:kn}}function so(e,t){const n=r=>ro({...e,...oo(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rt=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Je=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Pn=BigInt(1),Qe=BigInt(2),tn=(e,t)=>(e+t/Qe)/t;function qn(e){const t=rt,n=BigInt(3),r=BigInt(6),o=BigInt(11),s=BigInt(22),i=BigInt(23),c=BigInt(44),f=BigInt(88),a=e*e*e%t,u=a*a*e%t,l=W(u,n,t)*u%t,h=W(l,n,t)*u%t,g=W(h,Qe,t)*a%t,y=W(g,o,t)*g%t,d=W(y,s,t)*y%t,w=W(d,c,t)*d%t,b=W(w,f,t)*w%t,m=W(b,c,t)*d%t,x=W(m,n,t)*u%t,$=W(x,i,t)*y%t,S=W($,r,t)*a%t,v=W(S,Qe,t);if(!Bt.eql(Bt.sqr(v),e))throw new Error("Cannot find square root");return v}const Bt=Gr(rt,void 0,void 0,{sqrt:qn}),qt=so({a:BigInt(0),b:BigInt(7),Fp:Bt,n:Je,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Je,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Pn*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,i=BigInt("0x100000000000000000000000000000000"),c=tn(s*e,t),f=tn(-r*e,t);let a=C(e-c*n-f*o,t),u=C(-c*r-f*s,t);const l=a>i,h=u>i;if(l&&(a=t-a),h&&(u=t-u),a>i||u>i)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:a,k2neg:h,k2:u}}}},vt),ot=BigInt(0),Mn=e=>typeof e=="bigint"&&ot<e&&e<rt,io=e=>typeof e=="bigint"&&ot<e&&e<Je,nn={};function Xe(e,...t){let n=nn[e];if(n===void 0){const r=vt(Uint8Array.from(e,o=>o.charCodeAt(0)));n=ve(r,r),nn[e]=n}return vt(ve(n,...t))}const Mt=e=>e.toRawBytes(!0).slice(1),St=e=>ge(e,32),gt=e=>C(e,rt),je=e=>C(e,Je),jt=qt.ProjectivePoint,co=(e,t,n)=>jt.BASE.multiplyAndAddUnsafe(e,t,n);function $t(e){let t=qt.utils.normPrivateKeyToScalar(e),n=jt.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:je(-t),bytes:Mt(n)}}function jn(e){if(!Mn(e))throw new Error("bad x: need 0 < x < p");const t=gt(e*e),n=gt(t*e+BigInt(7));let r=qn(n);r%Qe!==ot&&(r=gt(-r));const o=new jt(e,r,Pn);return o.assertValidity(),o}function zn(...e){return je(q(Xe("BIP0340/challenge",...e)))}function fo(e){return $t(e).bytes}function ao(e,t,n=kn(32)){const r=P("message",e),{bytes:o,scalar:s}=$t(t),i=P("auxRand",n,32),c=St(s^q(Xe("BIP0340/aux",i))),f=Xe("BIP0340/nonce",c,o,r),a=je(q(f));if(a===ot)throw new Error("sign failed: k is zero");const{bytes:u,scalar:l}=$t(a),h=zn(u,o,r),g=new Uint8Array(64);if(g.set(u,0),g.set(St(je(l+h*s)),32),!Kn(g,r,o))throw new Error("sign: Invalid signature produced");return g}function Kn(e,t,n){const r=P("signature",e,64),o=P("message",t),s=P("publicKey",n,32);try{const i=jn(q(s)),c=q(r.subarray(0,32));if(!Mn(c))return!1;const f=q(r.subarray(32,64));if(!io(f))return!1;const a=zn(St(c),Mt(i),o),u=co(i,f,je(-a));return!(!u||!u.hasEvenY()||u.toAffine().x!==c)}catch{return!1}}const Q={getPublicKey:fo,sign:ao,verify:Kn,utils:{randomPrivateKey:qt.utils.randomPrivateKey,lift_x:jn,pointToBytes:Mt,numberToBytesBE:ge,bytesToNumberBE:q,taggedHash:Xe,mod:C}};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Vn=e=>e instanceof Uint8Array,pt=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),J=(e,t)=>e<<32-t|e>>>t,lo=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!lo)throw new Error("Non little-endian hardware is not supported");const uo=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function de(e){if(!Vn(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=uo[e[n]];return t}function ho(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const o=r*2,s=e.slice(o,o+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[r]=i}return n}function go(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Wn(e){if(typeof e=="string"&&(e=go(e)),!Vn(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}class po{clone(){return this._cloneInto()}}function Zn(e){const t=r=>e().update(Wn(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function kt(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function wo(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Dn(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function yo(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");kt(e.outputLen),kt(e.blockLen)}function bo(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function mo(e,t){Dn(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const wt={number:kt,bool:wo,bytes:Dn,hash:yo,exists:bo,output:mo};function Eo(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),s=BigInt(4294967295),i=Number(n>>o&s),c=Number(n&s),f=r?4:0,a=r?0:4;e.setUint32(t+f,i,r),e.setUint32(t+a,c,r)}class xo extends po{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=pt(this.buffer)}update(t){wt.exists(this);const{view:n,buffer:r,blockLen:o}=this;t=Wn(t);const s=t.length;for(let i=0;i<s;){const c=Math.min(o-this.pos,s-i);if(c===o){const f=pt(t);for(;o<=s-i;i+=o)this.process(f,i);continue}r.set(t.subarray(i,i+c),this.pos),this.pos+=c,i+=c,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){wt.exists(this),wt.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:s}=this;let{pos:i}=this;n[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>o-i&&(this.process(r,0),i=0);for(let l=i;l<o;l++)n[l]=0;Eo(r,o-8,BigInt(this.length*8),s),this.process(r,0);const c=pt(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const a=f/4,u=this.get();if(a>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<a;l++)c.setUint32(4*l,u[l],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:s,destroyed:i,pos:c}=this;return t.length=o,t.pos=c,t.finished=s,t.destroyed=i,o%n&&t.buffer.set(r),t}}const vo=(e,t,n)=>e&t^~e&n,_o=(e,t,n)=>e&t^e&n^t&n,Ao=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ue=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),he=new Uint32Array(64);class Gn extends xo{constructor(){super(64,32,8,!1),this.A=ue[0]|0,this.B=ue[1]|0,this.C=ue[2]|0,this.D=ue[3]|0,this.E=ue[4]|0,this.F=ue[5]|0,this.G=ue[6]|0,this.H=ue[7]|0}get(){const{A:t,B:n,C:r,D:o,E:s,F:i,G:c,H:f}=this;return[t,n,r,o,s,i,c,f]}set(t,n,r,o,s,i,c,f){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=s|0,this.F=i|0,this.G=c|0,this.H=f|0}process(t,n){for(let l=0;l<16;l++,n+=4)he[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const h=he[l-15],g=he[l-2],y=J(h,7)^J(h,18)^h>>>3,d=J(g,17)^J(g,19)^g>>>10;he[l]=d+he[l-7]+y+he[l-16]|0}let{A:r,B:o,C:s,D:i,E:c,F:f,G:a,H:u}=this;for(let l=0;l<64;l++){const h=J(c,6)^J(c,11)^J(c,25),g=u+h+vo(c,f,a)+Ao[l]+he[l]|0,d=(J(r,2)^J(r,13)^J(r,22))+_o(r,o,s)|0;u=a,a=f,f=c,c=i+g|0,i=s,s=o,o=r,r=g+d|0}r=r+this.A|0,o=o+this.B|0,s=s+this.C|0,i=i+this.D|0,c=c+this.E|0,f=f+this.F|0,a=a+this.G|0,u=u+this.H|0,this.set(r,o,s,i,c,f,a,u)}roundClean(){he.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Bo extends Gn{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Fn=Zn(()=>new Gn);Zn(()=>new Bo);var ke=Symbol("verified"),So=e=>e instanceof Object;function $o(e){if(!So(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}new TextDecoder("utf-8");var ko=new TextEncoder,Io=class{generateSecretKey(){return Q.utils.randomPrivateKey()}getPublicKey(t){return de(Q.getPublicKey(t))}finalizeEvent(t,n){const r=t;return r.pubkey=de(Q.getPublicKey(n)),r.id=yt(r),r.sig=de(Q.sign(yt(r),n)),r[ke]=!0,r}verifyEvent(t){if(typeof t[ke]=="boolean")return t[ke];const n=yt(t);if(n!==t.id)return t[ke]=!1,!1;try{const r=Q.verify(t.sig,n,t.pubkey);return t[ke]=r,r}catch{return t[ke]=!1,!1}}};function Lo(e){if(!$o(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function yt(e){let t=Fn(ko.encode(Lo(e)));return de(t)}var st=new Io,To=st.generateSecretKey;st.getPublicKey;var Oo=st.finalizeEvent;st.verifyEvent;var ye=Symbol("verified"),Uo=e=>e instanceof Object;function No(e){if(!Uo(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}new TextDecoder("utf-8");var Ho=new TextEncoder;function Ce(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}var Ro=class{constructor(e){_(this,"value");_(this,"next",null);_(this,"prev",null);this.value=e}},Co=class{constructor(){_(this,"first");_(this,"last");this.first=null,this.last=null}enqueue(e){const t=new Ro(e);return this.last?this.last===this.first?(this.last=t,this.last.prev=this.first,this.first.next=t):(t.prev=this.last,this.last.next=t,this.last=t):(this.first=t,this.last=t),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const t=this.first;return this.first=null,this.last=null,t.value}const e=this.first;return this.first=e.next,e.value}},Po=class{generateSecretKey(){return Q.utils.randomPrivateKey()}getPublicKey(e){return de(Q.getPublicKey(e))}finalizeEvent(e,t){const n=e;return n.pubkey=de(Q.getPublicKey(t)),n.id=bt(n),n.sig=de(Q.sign(bt(n),t)),n[ye]=!0,n}verifyEvent(e){if(typeof e[ye]=="boolean")return e[ye];const t=bt(e);if(t!==e.id)return e[ye]=!1,!1;try{const n=Q.verify(e.sig,t,e.pubkey);return e[ye]=n,n}catch{return e[ye]=!1,!1}}};function qo(e){if(!No(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function bt(e){let t=Fn(Ho.encode(qo(e)));return de(t)}var it=new Po;it.generateSecretKey;it.getPublicKey;it.finalizeEvent;var Mo=it.verifyEvent,jo=22242;function zo(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1)return!1;for(let n in e)if(n[0]==="#"){let r=n.slice(1),o=e[`#${r}`];if(o&&!t.tags.find(([s,i])=>s===n.slice(1)&&o.indexOf(i)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function Ko(e,t){for(let n=0;n<e.length;n++)if(zo(e[n],t))return!0;return!1}function Vo(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function Wo(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let r=t+7+1+n,o=e.slice(r+1,80).indexOf('"');if(o===-1)return null;let s=r+1+o;return e.slice(r+1,s)}function Zo(e,t){return{kind:jo,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function Do(){return new Promise(e=>{const t=new MessageChannel,n=()=>{t.port1.removeEventListener("message",n),e()};t.port1.addEventListener("message",n),t.port2.postMessage(0),t.port1.start()})}var Go=e=>(e[ye]=!0,!0),Yn=class{constructor(e,t){_(this,"url");_(this,"_connected",!1);_(this,"onclose",null);_(this,"onnotice",e=>console.debug(`NOTICE from ${this.url}: ${e}`));_(this,"_onauth",null);_(this,"baseEoseTimeout",4400);_(this,"connectionTimeout",4400);_(this,"openSubs",new Map);_(this,"connectionTimeoutHandle");_(this,"connectionPromise");_(this,"openCountRequests",new Map);_(this,"openEventPublishes",new Map);_(this,"ws");_(this,"incomingMessageQueue",new Co);_(this,"queueRunning",!1);_(this,"challenge");_(this,"serial",0);_(this,"verifyEvent");_(this,"_WebSocket");this.url=Ce(e),this.verifyEvent=t.verifyEvent,this._WebSocket=t.websocketImplementation||WebSocket}static async connect(e,t){const n=new Yn(e,t);return await n.connect(),n}closeAllSubscriptions(e){for(let[t,n]of this.openSubs)n.close(e);this.openSubs.clear();for(let[t,n]of this.openEventPublishes)n.reject(new Error(e));this.openEventPublishes.clear();for(let[t,n]of this.openCountRequests)n.reject(new Error(e));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((e,t)=>{this.connectionTimeoutHandle=setTimeout(()=>{var n;t("connection timed out"),this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new this._WebSocket(this.url)}catch(n){t(n);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,e()},this.ws.onerror=n=>{var r;t(n.message||"websocket error"),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var n;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await Do();this.queueRunning=!1}handleNext(){var n,r,o;const e=this.incomingMessageQueue.dequeue();if(!e)return!1;const t=Wo(e);if(t){const s=this.openSubs.get(t);if(!s)return;const i=Vo(e,"id"),c=(n=s.alreadyHaveEvent)==null?void 0:n.call(s,i);if((r=s.receivedEvent)==null||r.call(s,this,i),c)return}try{let s=JSON.parse(e);switch(s[0]){case"EVENT":{const i=this.openSubs.get(s[1]),c=s[2];this.verifyEvent(c)&&Ko(i.filters,c)&&i.onevent(c);return}case"COUNT":{const i=s[1],c=s[2],f=this.openCountRequests.get(i);f&&(f.resolve(c.count),this.openCountRequests.delete(i));return}case"EOSE":{const i=this.openSubs.get(s[1]);if(!i)return;i.receivedEose();return}case"OK":{const i=s[1],c=s[2],f=s[3],a=this.openEventPublishes.get(i);c?a.resolve(f):a.reject(new Error(f)),this.openEventPublishes.delete(i);return}case"CLOSED":{const i=s[1],c=this.openSubs.get(i);if(!c)return;c.closed=!0,c.close(s[2]);return}case"NOTICE":this.onnotice(s[1]);return;case"AUTH":{this.challenge=s[1],(o=this._onauth)==null||o.call(this,s[1]);return}}}catch{return}}async send(e){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var t;(t=this.ws)==null||t.send(e)})}async auth(e){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const t=await e(Zo(this.url,this.challenge)),n=new Promise((r,o)=>{this.openEventPublishes.set(t.id,{resolve:r,reject:o})});return this.send('["AUTH",'+JSON.stringify(t)+"]"),n}async publish(e){const t=new Promise((n,r)=>{this.openEventPublishes.set(e.id,{resolve:n,reject:r})});return this.send('["EVENT",'+JSON.stringify(e)+"]"),t}async count(e,t){this.serial++;const n=(t==null?void 0:t.id)||"count:"+this.serial,r=new Promise((o,s)=>{this.openCountRequests.set(n,{resolve:o,reject:s})});return this.send('["COUNT","'+n+'",'+JSON.stringify(e).substring(1)),r}subscribe(e,t){const n=this.prepareSubscription(e,t);return n.fire(),n}prepareSubscription(e,t){this.serial++;const n=t.id||"sub:"+this.serial,r=new Fo(this,n,e,t);return this.openSubs.set(n,r),r}close(){var e;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(e=this.ws)==null||e.close()}_onmessage(e){this.incomingMessageQueue.enqueue(e.data),this.queueRunning||this.runQueue()}},Fo=class{constructor(e,t,n,r){_(this,"relay");_(this,"id");_(this,"closed",!1);_(this,"eosed",!1);_(this,"filters");_(this,"alreadyHaveEvent");_(this,"receivedEvent");_(this,"onevent");_(this,"oneose");_(this,"onclose");_(this,"eoseTimeout");_(this,"eoseTimeoutHandle");this.relay=e,this.filters=n,this.id=t,this.alreadyHaveEvent=r.alreadyHaveEvent,this.receivedEvent=r.receivedEvent,this.eoseTimeout=r.eoseTimeout||e.baseEoseTimeout,this.oneose=r.oneose,this.onclose=r.onclose,this.onevent=r.onevent||(o=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,o)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var e;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(e=this.oneose)==null||e.call(this))}close(e="closed by caller"){var t;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(t=this.onclose)==null||t.call(this,e)}},Yo=class{constructor(e){_(this,"relays",new Map);_(this,"seenOn",new Map);_(this,"trackRelays",!1);_(this,"verifyEvent");_(this,"trustedRelayURLs",new Set);_(this,"_WebSocket");this.verifyEvent=e.verifyEvent,this._WebSocket=e.websocketImplementation}async ensureRelay(e,t){e=Ce(e);let n=this.relays.get(e);return n||(n=new Yn(e,{verifyEvent:this.trustedRelayURLs.has(e)?Go:this.verifyEvent,websocketImplementation:this._WebSocket}),t!=null&&t.connectionTimeout&&(n.connectionTimeout=t.connectionTimeout),this.relays.set(e,n)),await n.connect(),n}close(e){e.map(Ce).forEach(t=>{var n;(n=this.relays.get(t))==null||n.close()})}subscribeMany(e,t,n){return this.subscribeManyMap(Object.fromEntries(e.map(r=>[r,t])),n)}subscribeManyMap(e,t){this.trackRelays&&(t.receivedEvent=(l,h)=>{let g=this.seenOn.get(h);g||(g=new Set,this.seenOn.set(h,g)),g.add(l)});const n=new Set,r=[],o=Object.keys(e).length,s=[];let i=l=>{var h;s[l]=!0,s.filter(g=>g).length===o&&((h=t.oneose)==null||h.call(t),i=()=>{})};const c=[];let f=(l,h)=>{var g;i(l),c[l]=h,c.filter(y=>y).length===o&&((g=t.onclose)==null||g.call(t,c),f=()=>{})};const a=l=>{var g;if((g=t.alreadyHaveEvent)!=null&&g.call(t,l))return!0;const h=n.has(l);return n.add(l),h},u=Promise.all(Object.entries(e).map(async(l,h,g)=>{if(g.indexOf(l)!==h){f(h,"duplicate url");return}let[y,d]=l;y=Ce(y);let w;try{w=await this.ensureRelay(y,{connectionTimeout:t.maxWait?Math.max(t.maxWait*.8,t.maxWait-1e3):void 0})}catch(m){f(h,(m==null?void 0:m.message)||String(m));return}let b=w.subscribe(d,{...t,oneose:()=>i(h),onclose:m=>f(h,m),alreadyHaveEvent:a,eoseTimeout:t.maxWait});r.push(b)}));return{async close(){await u,r.forEach(l=>{l.close()})}}}subscribeManyEose(e,t,n){const r=this.subscribeMany(e,t,{...n,oneose(){r.close()}});return r}async querySync(e,t,n){return new Promise(async r=>{const o=[];this.subscribeManyEose(e,[t],{...n,onevent(s){o.push(s)},onclose(s){r(o)}})})}async get(e,t,n){t.limit=1;const r=await this.querySync(e,t,n);return r.sort((o,s)=>s.created_at-o.created_at),r[0]||null}publish(e,t){return e.map(Ce).map(async(n,r,o)=>o.indexOf(n)!==r?Promise.reject("duplicate url"):(await this.ensureRelay(n)).publish(t))}},Jn;try{Jn=WebSocket}catch{}var Jo=class extends Yo{constructor(){super({verifyEvent:Mo,websocketImplementation:Jn})}};new TextDecoder("utf-8");new TextEncoder;function Qo(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function Xo(e,t){const[n,r]=es(e,o=>t.id===o.id?0:t.created_at===o.created_at?-1:t.created_at-o.created_at);return r||e.splice(n,0,t),e}function es(e,t){let n=0,r=e.length-1;for(;n<=r;){const o=Math.floor((n+r)/2),s=t(e[o]);if(s===0)return[o,!0];s<0?r=o-1:n=o+1}return[n,!1]}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ne(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function ne(...e){const t=(o,s)=>i=>o(s(i)),n=Array.from(e).reverse().reduce((o,s)=>o?t(o,s.encode):s.encode,void 0),r=e.reduce((o,s)=>o?t(o,s.decode):s.decode,void 0);return{encode:n,decode:r}}function re(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if(Ne(n),n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=e.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return r})}}}function oe(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function ct(e,t="="){if(Ne(e),typeof t!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let o of n)if(typeof o!="string")throw new Error(`padding.decode: non-string input=${o}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function Qn(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function rn(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const o=[],s=Array.from(e);for(s.forEach(i=>{if(Ne(i),i<0||i>=t)throw new Error(`Wrong integer: ${i}`)});;){let i=0,c=!0;for(let f=r;f<s.length;f++){const a=s[f],u=t*i+a;if(!Number.isSafeInteger(u)||t*i/t!==i||u-a!==t*i)throw new Error("convertRadix: carry overflow");if(i=u%n,s[f]=Math.floor(u/n),!Number.isSafeInteger(s[f])||s[f]*n+i!==u)throw new Error("convertRadix: carry overflow");if(c)s[f]?c=!1:r=f;else continue}if(o.push(i),c)break}for(let i=0;i<e.length-1&&e[i]===0;i++)o.push(0);return o.reverse()}const Xn=(e,t)=>t?Xn(t,e%t):e,et=(e,t)=>e+(t-Xn(e,t));function It(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(et(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${et(t,n)}`);let o=0,s=0;const i=2**n-1,c=[];for(const f of e){if(Ne(f),f>=2**t)throw new Error(`convertRadix2: invalid data word=${f} from=${t}`);if(o=o<<t|f,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=n;s-=n)c.push((o>>s-n&i)>>>0);o&=2**s-1}if(o=o<<n-s&i,!r&&s>=t)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&s>0&&c.push(o>>>0),c}function ts(e){return Ne(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return rn(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(rn(t,e,2**8))}}}function pe(e,t=!1){if(Ne(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(et(8,e)>32||et(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return It(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(It(n,e,8,t))}}}function on(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}const ns=ne(pe(4),re("0123456789ABCDEF"),oe("")),rs=ne(pe(5),re("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),ct(5),oe(""));ne(pe(5),re("0123456789ABCDEFGHIJKLMNOPQRSTUV"),ct(5),oe(""));ne(pe(5),re("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),oe(""),Qn(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const os=ne(pe(6),re("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),ct(6),oe("")),ss=ne(pe(6),re("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),ct(6),oe("")),zt=e=>ne(ts(58),re(e),oe("")),Lt=zt("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");zt("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");zt("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const sn=[0,2,3,5,6,7,9,10,11],is={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=Lt.encode(r).padStart(sn[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),o=sn.indexOf(r.length),s=Lt.decode(r);for(let i=0;i<s.length-o;i++)if(s[i]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(s.slice(s.length-o)))}return Uint8Array.from(t)}},Tt=ne(re("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),oe("")),cn=[996825010,642813549,513874426,1027748829,705979059];function Re(e){const t=e>>25;let n=(e&33554431)<<5;for(let r=0;r<cn.length;r++)(t>>r&1)===1&&(n^=cn[r]);return n}function fn(e,t,n=1){const r=e.length;let o=1;for(let s=0;s<r;s++){const i=e.charCodeAt(s);if(i<33||i>126)throw new Error(`Invalid prefix (${e})`);o=Re(o)^i>>5}o=Re(o);for(let s=0;s<r;s++)o=Re(o)^e.charCodeAt(s)&31;for(let s of t)o=Re(o)^s;for(let s=0;s<6;s++)o=Re(o);return o^=n,Tt.encode(It([o%2**30],30,5,!1))}function er(e){const t=e==="bech32"?1:734539939,n=pe(5),r=n.decode,o=n.encode,s=on(r);function i(u,l,h=90){if(typeof u!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof u}`);if(!Array.isArray(l)||l.length&&typeof l[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof l}`);const g=u.length+7+l.length;if(h!==!1&&g>h)throw new TypeError(`Length ${g} exceeds limit ${h}`);return u=u.toLowerCase(),`${u}1${Tt.encode(l)}${fn(u,l,t)}`}function c(u,l=90){if(typeof u!="string")throw new Error(`bech32.decode input should be string, not ${typeof u}`);if(u.length<8||l!==!1&&u.length>l)throw new TypeError(`Wrong string length: ${u.length} (${u}). Expected (8..${l})`);const h=u.toLowerCase();if(u!==h&&u!==u.toUpperCase())throw new Error("String must be lowercase or uppercase");u=h;const g=u.lastIndexOf("1");if(g===0||g===-1)throw new Error('Letter "1" must be present between prefix and data only');const y=u.slice(0,g),d=u.slice(g+1);if(d.length<6)throw new Error("Data must be at least 6 characters long");const w=Tt.decode(d).slice(0,-6),b=fn(y,w,t);if(!d.endsWith(b))throw new Error(`Invalid checksum in ${u}: expected "${b}"`);return{prefix:y,words:w}}const f=on(c);function a(u){const{prefix:l,words:h}=c(u,!1);return{prefix:l,words:h,bytes:r(h)}}return{encode:i,decode:c,decodeToBytes:a,decodeUnsafe:f,fromWords:r,fromWordsUnsafe:s,toWords:o}}const an=er("bech32");er("bech32m");const cs={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},fs=ne(pe(4),re("0123456789abcdef"),oe(""),Qn(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),as={utf8:cs,hex:fs,base16:ns,base32:rs,base64:os,base64url:ss,base58:Lt,base58xmr:is};`${Object.keys(as).join(", ")}`;new TextDecoder("utf-8");new TextEncoder;var ls=5e3;function tr(e){return hs("npub",ho(e))}function us(e,t){let n=an.toWords(t);return an.encode(e,n,ls)}function hs(e,t){return us(e,t)}const nr=7,ds=5,ln="https://nostter.app",gs=["wss://relay.mymt.casa/"],ps=["wss://purplepag.es/","wss://directory.yabu.me/"],ws="⭐",un=e=>`https://robohash.org/${tr(e)}?set=set4`,hn=(e,t,n,r=()=>{},o=!0)=>new Promise(s=>{const i=[],c=u=>{i.push(u),r(u)},f=()=>{o&&a.close(),s(i)},a=e.subscribeMany(t,n,{onevent:c,oneose:f})}),ys=async(e,t,n,r,o=!0,s,i)=>{const c=[["r",n]],f={kind:nr,created_at:Math.floor(Date.now()/1e3),tags:c,content:r};let a;if(window.nostr===void 0){if(o){console.warn("window.nostr is undefined");return}a=Oo(f,s)}else a=await window.nostr.signEvent(f);const u=e.publish(t,a);await Promise.any(u)};function bs(e){var i;const t=e.slice(),n=t[1].get(t[0].pubkey);t[3]=n;const r=JSON.parse(((i=t[3])==null?void 0:i.content)??"{}");t[4]=r;const o=tr(t[0].pubkey);t[5]=o;const s=t[4].name??"";return t[6]=s,t}function ms(e){let t,n;function r(i,c){var f;return c&5&&(n=null),n==null&&(n=i[0].content===`:${((f=i[2])==null?void 0:f.at(1))??""}:`),n?xs:Es}let o=r(e,-1),s=o(e);return{c(){t=X("span"),s.c(),I(t,"class","makibishi-content svelte-1xdd8i5")},m(i,c){F(i,t,c),s.m(t,null)},p(i,c){o===(o=r(i,c))&&s?s.p(i,c):(s.d(1),s=o(i),s&&(s.c(),s.m(t,null)))},d(i){i&&D(t),s.d()}}}function dn(e){let t,n,r,o,s,i,c,f;function a(h,g){var y;return g&5&&(n=null),n==null&&(n=h[0].content===`:${((y=h[2])==null?void 0:y.at(1))??""}:`),n?_s:vs}let u=a(e,-1),l=u(e);return{c(){t=X("span"),l.c(),r=X("a"),o=X("img"),I(t,"class","makibishi-content svelte-1xdd8i5"),I(o,"class","makibishi-profile-picture svelte-1xdd8i5"),Te(o.src,s=e[4].picture??un(e[0].pubkey))||I(o,"src",s),I(o,"alt",i="@"+e[6]),I(o,"title",c="@"+e[6]),I(r,"class","makibishi-link svelte-1xdd8i5"),I(r,"href",f=ln+"/"+e[5]),I(r,"target","_blank"),I(r,"rel","noopener noreferrer")},m(h,g){F(h,t,g),l.m(t,null),F(h,r,g),De(r,o)},p(h,g){u===(u=a(h,g))&&l?l.p(h,g):(l.d(1),l=u(h),l&&(l.c(),l.m(t,null))),g&3&&!Te(o.src,s=h[4].picture??un(h[0].pubkey))&&I(o,"src",s),g&3&&i!==(i="@"+h[6])&&I(o,"alt",i),g&3&&c!==(c="@"+h[6])&&I(o,"title",c),g&1&&f!==(f=ln+"/"+h[5])&&I(r,"href",f)},d(h){h&&(D(t),D(r)),l.d()}}}function Es(e){let t=e[0].content+"",n;return{c(){n=Ke(t)},m(r,o){F(r,n,o)},p(r,o){o&1&&t!==(t=r[0].content+"")&&Ut(n,t)},d(r){r&&D(n)}}}function xs(e){let t,n,r,o;return{c(){var s;t=X("img"),Te(t.src,n=(s=e[2])==null?void 0:s.at(2))||I(t,"src",n),I(t,"alt",r=e[0].content),I(t,"title",o=e[0].content),I(t,"class","svelte-1xdd8i5")},m(s,i){F(s,t,i)},p(s,i){var c;i&4&&!Te(t.src,n=(c=s[2])==null?void 0:c.at(2))&&I(t,"src",n),i&1&&r!==(r=s[0].content)&&I(t,"alt",r),i&1&&o!==(o=s[0].content)&&I(t,"title",o)},d(s){s&&D(t)}}}function vs(e){let t=e[0].content+"",n;return{c(){n=Ke(t)},m(r,o){F(r,n,o)},p(r,o){o&1&&t!==(t=r[0].content+"")&&Ut(n,t)},d(r){r&&D(n)}}}function _s(e){let t,n,r,o;return{c(){var s;t=X("img"),Te(t.src,n=(s=e[2])==null?void 0:s.at(2))||I(t,"src",n),I(t,"alt",r=e[0].content),I(t,"title",o=e[0].content),I(t,"class","svelte-1xdd8i5")},m(s,i){F(s,t,i)},p(s,i){var c;i&4&&!Te(t.src,n=(c=s[2])==null?void 0:c.at(2))&&I(t,"src",n),i&1&&r!==(r=s[0].content)&&I(t,"alt",r),i&1&&o!==(o=s[0].content)&&I(t,"title",o)},d(s){s&&D(t)}}}function As(e){let t,n;function r(c,f){return f&3&&(n=null),n==null&&(n=!!c[1].has(c[0].pubkey)),n?dn:ms}function o(c,f){return f===dn?bs(c):c}let s=r(e,-1),i=s(o(e,s));return{c(){t=X("span"),i.c(),I(t,"class","makibishi-unit svelte-1xdd8i5")},m(c,f){F(c,t,f),i.m(t,null)},p(c,[f]){s===(s=r(c,f))&&i?i.p(o(c,s),f):(i.d(1),i=s(o(c,s)),i&&(i.c(),i.m(t,null)))},i:qe,o:qe,d(c){c&&D(t),i.d()}}}function Bs(e,t,n){let r,{ev:o}=t,{profiles:s}=t;return e.$$set=i=>{"ev"in i&&n(0,o=i.ev),"profiles"in i&&n(1,s=i.profiles)},e.$$.update=()=>{e.$$.dirty&1&&n(2,r=o.tags.find(i=>i[0]==="emoji"))},[o,s,r]}class Ot extends An{constructor(t){super(),_n(this,t,Bs,As,bn,{ev:0,profiles:1})}}function gn(e,t,n){const r=e.slice();return r[15]=t[n],r}function Ss(e){let t,n,r=e[0].length-2+"",o,s,i,c,f;return t=new Ot({props:{ev:e[4],profiles:e[1]}}),s=new Ot({props:{ev:e[3],profiles:e[1]}}),{c(){xt(t.$$.fragment),n=X("button"),o=Ke(r),xt(s.$$.fragment),I(n,"class","makibishi-expand svelte-9utk63")},m(a,u){Ge(t,a,u),F(a,n,u),De(n,o),Ge(s,a,u),i=!0,c||(f=mn(n,"click",e[6]),c=!0)},p(a,u){const l={};u&16&&(l.ev=a[4]),u&2&&(l.profiles=a[1]),t.$set(l),(!i||u&1)&&r!==(r=a[0].length-2+"")&&Ut(o,r);const h={};u&8&&(h.ev=a[3]),u&2&&(h.profiles=a[1]),s.$set(h)},i(a){i||(te(t.$$.fragment,a),te(s.$$.fragment,a),i=!0)},o(a){xe(t.$$.fragment,a),xe(s.$$.fragment,a),i=!1},d(a){a&&D(n),Fe(t,a),Fe(s,a),c=!1,f()}}}function $s(e){let t,n,r=Ft(e[0]),o=[];for(let i=0;i<r.length;i+=1)o[i]=pn(gn(e,r,i));const s=i=>xe(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=fr()},m(i,c){for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(i,c);F(i,t,c),n=!0},p(i,c){if(c&3){r=Ft(i[0]);let f;for(f=0;f<r.length;f+=1){const a=gn(i,r,f);o[f]?(o[f].p(a,c),te(o[f],1)):(o[f]=pn(a),o[f].c(),te(o[f],1),o[f].m(t.parentNode,t))}for(xn(),f=r.length;f<o.length;f+=1)s(f);vn()}},i(i){if(!n){for(let c=0;c<r.length;c+=1)te(o[c]);n=!0}},o(i){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)xe(o[c]);n=!1},d(i){i&&D(t),ir(o,i)}}}function pn(e){let t,n;return t=new Ot({props:{ev:e[15],profiles:e[1]}}),{c(){xt(t.$$.fragment)},m(r,o){Ge(t,r,o),n=!0},p(r,o){const s={};o&1&&(s.ev=r[15]),o&2&&(s.profiles=r[1]),t.$set(s)},i(r){n||(te(t.$$.fragment,r),n=!0)},o(r){xe(t.$$.fragment,r),n=!1},d(r){Fe(t,r)}}}function ks(e){let t,n,r,o,s,i,c,f;const a=[$s,Ss],u=[];function l(h,g){return h[0].length<=ds||h[2]?0:1}return o=l(e),s=u[o]=a[o](e),{c(){t=X("span"),n=X("button"),n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" class="svelte-9utk63"><path fill-rule="evenodd" d="M3.58169903,14.7981322 L4.42551943,9.87828177 L0.851038858,6.39402435 L5.79084952,5.67622784 L8,1.20000005 L10.2091505,5.67622784 L15.1489611,6.39402435 L11.5744806,9.87828177 L12.418301,14.7981322 L8,12.4752939 L3.58169903,14.7981322 Z M8,10.2157425 L9.76203892,11.1421011 L9.42551943,9.18004197 L10.8510389,7.79050395 L8.88101946,7.50424338 L8,5.71910297 L7.11898054,7.50424338 L5.14896114,7.79050395 L6.57448057,9.18004197 L6.23796108,11.1421011 L8,10.2157425 Z"></path></svg>',r=cr(),s.c(),I(n,"class","makibishi-button svelte-9utk63"),I(n,"title","add star"),I(t,"class","makibishi-container svelte-9utk63")},m(h,g){F(h,t,g),De(t,n),De(t,r),u[o].m(t,null),i=!0,c||(f=mn(n,"click",e[5]),c=!0)},p(h,[g]){let y=o;o=l(h),o===y?u[o].p(h,g):(xn(),xe(u[y],1,1,()=>{u[y]=null}),vn(),s=u[o],s?s.p(h,g):(s=u[o]=a[o](h),s.c()),te(s,1),s.m(t,null))},i(h){i||(te(s),i=!0)},o(h){xe(s),i=!1},d(h){h&&D(t),u[o].d(),c=!1,f()}}}function Is(e,t,n){let r,o,s,i=[],c=new Map,f,a,u,l,h,g;const y=async m=>{URL.canParse(m)&&await hn(s,u,[{kinds:[nr],"#r":[m]}],x=>{i.some($=>$.id===x.id)||n(0,i=Xo(i,x))},!1)},d=async m=>{await hn(s,ps,[{kinds:[0],authors:m}],x=>{const $=c.get(x.pubkey);if($===void 0||$.created_at<x.created_at){try{const S=JSON.parse(x.content)}catch(S){console.warn(S);return}c.set(x.pubkey,x),n(1,c)}},!0)},w=async()=>{await ys(s,u,l,h,!g,a)};ur(async()=>{const m=document.getElementById("makibishi");if(m===null){console.warn("makibishi is not found");return}const x=m.dataset.relays,$=m.dataset.url,S=m.dataset.content,v=m.dataset.allowAnonymousReaction;x===void 0?u=gs:u=Array.from(new Set(x.split(",").filter(B=>URL.canParse(B)).map(B=>Qo(B)))),$===void 0?l=window.location.href:l=URL.canParse($)?$:window.location.href,h=S??ws,v===void 0?g=!1:g=/^true$/i.test(v),console.log("MAKIBISHI Settings:",{relays:u,targetUrl:l,reactionContent:h,allowAnonymousReaction:g}),s=new Jo,n(2,f=!1),a=To(),await y(l);const A=Array.from(new Set(i.map(B=>B.pubkey)));await d(A)});const b=()=>{n(2,f=!0)};return e.$$.update=()=>{e.$$.dirty&1&&n(4,r=i.at(0)),e.$$.dirty&1&&n(3,o=i.at(-1))},[i,c,f,o,r,w,b]}class Ls extends An{constructor(t){super(),_n(this,t,Is,ks,bn,{})}}new Ls({target:document.getElementById("makibishi")});
